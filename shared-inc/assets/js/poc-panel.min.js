jQuery(document).ready(function(t){var e=!0,o=wp.media.editor.send.attachment;t(".uploader .button").click(function(){var i=(wp.media.editor.send.attachment,t(this)),n=i.attr("id").replace("_button","");return e=!0,wp.media.editor.send.attachment=function(i,a){return e?(t("#"+n).val(a.url),void 0):o.apply(this,[i,a])},wp.media.editor.open(i),!1}),t(".add_media").on("click",function(){e=!1}),t(".panel-colorpicker").wpColorPicker({change:function(e,o){t("#"+e.target.id).parents(".typography_container").find(".font-preview > p").css("color",o.color.toString())}}),t(".typography_container").poc_panel_typography(),t(".panel-datepicker").datepicker({showOtherMonths:!0,selectOtherMonths:!0,numberOfMonths:2,minDate:0})}),function(t,e){e.poc_panel_typography=function(t,o){this.element=e(o),this._init(t)},e.poc_panel_typography.defaults={elements:{size:".typography_size",unit:".typography_unit",family:".typography_family",style:".typography_style",color:".typography_color",preview:".font-preview p",refresh:".refresh"}},e.poc_panel_typography.prototype={_init:function(t){if(this.options=e.extend(!0,{},e.poc_panel_typography.defaults,t),""==poc_family_string){var o=e.parseJSON(poc_web_fonts);poc_family_string+='<optgroup label="Web Fonts">',e.each(o.items,function(t,e){poc_family_string+="<option>"+e+"</option>"}),poc_family_string+="</optgroup>";var i=e.parseJSON(poc_google_fonts);poc_family_string+='<optgroup label="Google Fonts">',e.each(i.items,function(t,e){poc_family_string+="<option>"+e+"</option>"}),poc_family_string+="</optgroup>"}this._loadElements(),this._initEvents()},_loadElements:function(){var t=this.options.elements,e=this.element;for(var o in t)t[o]=e.find(t[o])},_initEvents:function(){var t=this.options.elements,o=t.refresh;o.on("click",function(o){o.preventDefault(),e(this).parent().fadeOut("slow"),t.preview.css("color",t.color.val());var i=t.size.val(),n=t.unit.val();t.preview.css("font-size",i+n),t.preview.css("line-height",("em"==n||"rem"==n?Number(i)+.4:Number(i)+4)+n);var a=t.style.val();"italic"==a?t.preview.css({"font-weight":"normal","font-style":"italic"}):"bold"==a?t.preview.css({"font-weight":"bold","font-style":"normal"}):"extra-bold"==a?t.preview.css({"font-weight":"800","font-style":"normal"}):"bold-italic"==a?t.preview.css({"font-weight":"bold","font-style":"italic"}):t.preview.css({"font-weight":"normal","font-style":"normal"});var r=t.family.find("option:selected").parent().attr("label");"Web fonts"==r?t.preview.css("font-family",t.family.val()):(WebFontConfig={google:{families:[t.family.find("option:selected").text()]},fontactive:function(e){t.preview.css("font-family",e)}},function(){var t=document.createElement("script");t.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",t.type="text/javascript",t.async="true";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}())}),e([t.size,t.unit]).each(function(){e(this).on("change",function(){if(!t.refresh.is(":visible")){var e=t.size.val(),o=t.unit.val();t.preview.css({"font-size":e+o,"line-height":("em"==o||"rem"==o?Number(e)+.4:Number(e)+4)+o}).trigger("resize")}})});var i=t.family;i.on("mousedown",function(){var t=e(this);if(0==t.data("instance")){var o={value:t.val(),text:t.find("option:selected").text()};t.html(poc_family_string).find("option").filter(function(){return e(this).text()==o.text}).attr("selected",!0),t.data("instance","true")}}),i.on("change",function(){if(!t.refresh.is(":visible")){var o=e(this).find("option:selected").parent().attr("label");"Web fonts"==o?t.preview.css("font-family",e(this).val()):(WebFontConfig={google:{families:[e(this).val()]},fontactive:function(e){t.preview.css("font-family",e)}},function(){var t=document.createElement("script");t.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",t.type="text/javascript",t.async="true";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()),t.preview.trigger("resize")}}),t.style.on("change",function(){if(!t.refresh.is(":visible")){var o=e(this).val();"italic"==o?t.preview.css({"font-weight":"normal","font-style":"italic"}):"bold"==o?t.preview.css({"font-weight":"bold","font-style":"normal"}):"extra-bold"==o?t.preview.css({"font-weight":"800","font-style":"normal"}):"bold-italic"==o?t.preview.css({"font-weight":"bold","font-style":"italic"}):t.preview.css({"font-weight":"normal","font-style":"normal"}),t.preview.trigger("resize")}}),t.preview.resize(function(){var t=e(this).parents(".poc-box");e(this).parents("form").height(t.height())})}},e.fn.poc_panel_typography=function(t){if("string"==typeof t){var o=Array.prototype.slice.call(arguments,1);this.each(function(){var i=e.data(this,"poc_panel_typography");return i?e.isFunction(i[t])&&"_"!==t.charAt(0)?(i[t].apply(i,o),void 0):(console.error("no such method '"+t+"' for poc_panel_typography instance"),void 0):(console.error("cannot call methods on poc_checkout prior to initialization; attempted to call method '"+t+"'"),void 0)})}else this.each(function(){var o=e.data(this,"poc_panel_typography");o||e.data(this,"poc_panel_typography",new e.poc_panel_typography(t,this))});return this}}(window,jQuery);